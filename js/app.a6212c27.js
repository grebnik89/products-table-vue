(function(){"use strict";var t={4219:function(t,e,r){var o=r(2856),n=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"container"},[e("h1",[t._v("Управление товарами")]),e("ProductForm"),e("ProductTable"),e("button",{staticClass:"save-btn",attrs:{disabled:!t.hasChanges||t.loading},on:{click:t.saveChanges}},[t._v(" Сохранить ")]),t.loading?e("AppSpinner"):t._e(),e("AppNotification")],1)])},s=[],i=(r(8111),r(1701),function(){var t=this,e=t._self._c;return e("div",{staticClass:"product-form"},[e("h2",[t._v("Добавить товар")]),e("form",{on:{submit:function(e){return e.preventDefault(),t.submitForm.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[e("label",[t._v("Название:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],class:{error:t.errors.name},attrs:{type:"text"},domProps:{value:t.form.name},on:{blur:function(e){return t.validateField("name")},input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}}),t.errors.name?e("div",{staticClass:"error-message"},[t._v(t._s(t.errors.name))]):t._e()]),e("div",{staticClass:"form-group"},[e("label",[t._v("Категория:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.category,expression:"form.category"}],class:{error:t.errors.category},on:{blur:function(e){return t.validateField("category")},change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.form,"category",e.target.multiple?r:r[0])}}},[e("option",{attrs:{value:""}},[t._v("Выберите категорию")]),e("option",{attrs:{value:"Электроника"}},[t._v("Электроника")]),e("option",{attrs:{value:"Одежда"}},[t._v("Одежда")]),e("option",{attrs:{value:"Еда"}},[t._v("Еда")])]),t.errors.category?e("div",{staticClass:"error-message"},[t._v(t._s(t.errors.category))]):t._e()]),e("div",{staticClass:"form-group"},[e("label",[t._v("Цена:")]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.price,expression:"form.price",modifiers:{number:!0}}],class:{error:t.errors.price},attrs:{type:"number",min:"0",step:"0.01"},domProps:{value:t.form.price},on:{blur:[function(e){return t.validateField("price")},function(e){return t.$forceUpdate()}],input:function(e){e.target.composing||t.$set(t.form,"price",t._n(e.target.value))}}}),t.errors.price?e("div",{staticClass:"error-message"},[t._v(t._s(t.errors.price))]):t._e()]),e("div",{staticClass:"form-group"},[e("label",[t._v("Количество:")]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.quantity,expression:"form.quantity",modifiers:{number:!0}}],class:{error:t.errors.quantity},attrs:{type:"number",min:"0"},domProps:{value:t.form.quantity},on:{blur:[function(e){return t.validateField("quantity")},function(e){return t.$forceUpdate()}],input:function(e){e.target.composing||t.$set(t.form,"quantity",t._n(e.target.value))}}}),t.errors.quantity?e("div",{staticClass:"error-message"},[t._v(t._s(t.errors.quantity))]):t._e()]),e("button",{staticClass:"submit-btn",attrs:{type:"submit",disabled:!t.isFormValid}},[t._v(" Добавить товар ")])])])}),a=[],c=(r(7588),{name:"ProductForm",data(){return{form:{name:"",category:"",price:null,quantity:null},errors:{name:"",category:"",price:"",quantity:""}}},computed:{isFormValid(){return this.form.name.length>=3&&this.form.category&&this.form.price>0&&this.form.quantity>=0}},methods:{validateField(t){switch(t){case"name":this.errors.name=this.form.name.length<3?"Название должно содержать минимум 3 символа":"";break;case"category":this.errors.category=this.form.category?"":"Выберите категорию";break;case"price":this.errors.price=!this.form.price||this.form.price<=0?"Цена должна быть больше 0":"";break;case"quantity":this.errors.quantity=null===this.form.quantity||this.form.quantity<0?"Количество должно быть неотрицательным числом":"";break}},submitForm(){Object.keys(this.form).forEach(t=>this.validateField(t)),this.isFormValid&&(this.$store.dispatch("products/addProduct",{name:this.form.name,category:this.form.category,price:this.form.price,quantity:this.form.quantity}),this.form={name:"",category:"",price:null,quantity:null},this.errors={name:"",category:"",price:"",quantity:""})}}}),u=c,l=r(1656),d=(0,l.A)(u,i,a,!1,null,"1cf87d3a",null),p=d.exports,m=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"product-table"},[e("h2",[t._v("Список товаров")]),e("table",[t._m(0),e("tbody",t._l(t.products,function(r,o){return e("tr",{key:r.id},[e("td",[t._v(t._s(r.id))]),e("td",[t._v(t._s(r.name))]),e("td",[t._v(t._s(r.category))]),e("td",[t._v(t._s(r.price))]),e("td",[t._v(t._s(r.quantity))]),e("td",[t._v(t._s(t.getProductStatus(r)))]),e("td",{staticClass:"actions"},[e("button",{staticClass:"move-btn",attrs:{disabled:0===o,title:"Переместить вверх"},on:{click:function(e){return t.moveProductUp(r.id)}}},[t._v(" ↑ ")]),e("button",{staticClass:"move-btn",attrs:{disabled:o===t.products.length-1,title:"Переместить вниз"},on:{click:function(e){return t.moveProductDown(r.id)}}},[t._v(" ↓ ")]),e("button",{staticClass:"delete-btn",attrs:{title:"Удалить"},on:{click:function(e){return t.deleteProduct(r.id)}}},[t._v(" ✕ ")])])])}),0)]),0===t.products.length?e("div",{staticClass:"empty-state"},[t._v(" Нет товаров для отображения ")]):t._e()])},f=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("thead",[e("tr",[e("th",[t._v("ID")]),e("th",[t._v("Название")]),e("th",[t._v("Категория")]),e("th",[t._v("Цена")]),e("th",[t._v("Количество")]),e("th",[t._v("Статус")]),e("th",[t._v("Действия")])])])}],v=r(2473),h=r(8827),y=r(1578),g=function(t,e,r,o){var n,s=arguments.length,i=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(t,e,r,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(i=(s<3?n(i):s>3?n(e,r,i):n(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i},_=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let b=class extends h.lD{constructor(...t){super(...t),(0,v.A)(this,"products",void 0),(0,v.A)(this,"deleteProductAction",void 0),(0,v.A)(this,"moveProductAction",void 0)}getProductStatus(t){return t.quantity>0?"В наличии":"Нет в наличии"}async deleteProduct(t){confirm("Вы уверены, что хотите удалить этот товар?")&&await this.deleteProductAction(t)}async moveProductUp(t){await this.moveProductAction({id:t,direction:"up"})}async moveProductDown(t){await this.moveProductAction({id:t,direction:"down"})}};g([(0,y.Uw)("products",{namespace:"products"}),_("design:type",Array)],b.prototype,"products",void 0),g([(0,y.rc)("deleteProduct",{namespace:"products"}),_("design:type",Object)],b.prototype,"deleteProductAction",void 0),g([(0,y.rc)("moveProduct",{namespace:"products"}),_("design:type",Object)],b.prototype,"moveProductAction",void 0),b=g([(0,h.uA)({})],b);var P,A=b,C=A,O=(0,l.A)(C,m,f,!1,null,"719667c4",null),w=O.exports,T=function(){var t=this;t._self._c;return t._m(0)},S=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"spinner-overlay"},[e("div",{staticClass:"spinner"})])}],E={name:"AppSpinner"},I=E,D=(0,l.A)(I,T,S,!1,null,"47d220c4",null),N=D.exports,q=function(){var t=this,e=t._self._c;return e("div",{staticClass:"notifications"},t._l(t.notifications,function(r){return e("div",{key:r.id,class:["notification",r.type]},[t._v(" "+t._s(r.message)+" ")])}),0)},x=[],F={name:"AppNotification",computed:{notifications(){return this.$store.state.products.notifications}}},k=F,R=(0,l.A)(k,q,x,!1,null,"1e1eb88c",null),M=R.exports,j={name:"App",components:{ProductForm:p,ProductTable:w,AppSpinner:N,AppNotification:M},computed:{loading(){return this.$store.state.products.loading},hasChanges(){return this.$store.state.products.hasChanges}},mounted(){this.$store.dispatch("products/loadFromLocalStorage")},methods:{saveChanges(){this.$store.dispatch("products/saveToLocalStorage")}}},$=j,U=(0,l.A)($,n,s,!1,null,null,null),L=U.exports,V=r(1910);r(4114),r(2489),r(3110),r(8335);(function(t){t["Electronics"]="Электроника",t["Clothing"]="Одежда",t["Food"]="Еда"})(P||(P={}));const G=t=>new Promise(e=>setTimeout(e,t)),H={async createProduct(t){if(console.log("Mock API: Creating product with delay..."),await G(500+1e3*Math.random()),Math.random()<.1)throw console.log("Mock API: Simulating error for create product"),new Error("API Error: Failed to create product");return console.log("Mock API: Product created successfully"),{success:!0}},async deleteProduct(t){if(await G(500+1e3*Math.random()),console.log("Mock API: Delete product with delay..."),Math.random()<.1)throw console.log("Mock API: Simulating error for delete product"),new Error("API Error: Failed to delete product");return console.log("Mock API: Product delete successfully"),{success:!0}}},J={products:[],loading:!1,hasChanges:!1,notifications:[]},z={status:t=>t=>t.quantity>0?"В наличии":"Нет в наличии"},B={SET_PRODUCTS(t,e){t.products=e},SET_LOADING(t,e){t.loading=e},SET_HAS_CHANGES(t,e){t.hasChanges=e},ADD_PRODUCT(t,e){t.products.push(e),t.hasChanges=!0},REMOVE_PRODUCT(t,e){t.products=t.products.filter(t=>t.id!==e),t.hasChanges=!0},MOVE_PRODUCT(t,e){const r=t.products[e.fromIndex];t.products.splice(e.fromIndex,1),t.products.splice(e.toIndex,0,r),t.hasChanges=!0},ADD_NOTIFICATION(t,e){t.notifications.push(e)},REMOVE_NOTIFICATION(t,e){t.notifications=t.notifications.filter(t=>t.id!==e)}},K={async loadFromLocalStorage({commit:t}){const e=localStorage.getItem("products");if(e)t("SET_PRODUCTS",JSON.parse(e));else{const e=[{id:1,name:"Ноутбук",category:P.Electronics,price:1e3,quantity:5},{id:2,name:"Футболка",category:P.Clothing,price:20,quantity:10},{id:3,name:"Яблоки",category:P.Food,price:5,quantity:0}];t("SET_PRODUCTS",e)}t("SET_HAS_CHANGES",!1)},async saveToLocalStorage({commit:t,state:e}){localStorage.setItem("products",JSON.stringify(e.products)),t("SET_HAS_CHANGES",!1)},async addProduct({commit:t,state:e,dispatch:r},o){t("SET_LOADING",!0);try{await H.createProduct(o);const n={...o,id:Math.max(0,...e.products.map(t=>t.id))+1};t("ADD_PRODUCT",n),r("showNotification",{type:"success",message:"Товар успешно добавлен"})}catch(n){const t=n instanceof Error?n.message:"Неизвестная ошибка";r("showNotification",{type:"error",message:`Ошибка при добавлении товара: ${t}`})}finally{t("SET_LOADING",!1)}},async deleteProduct({commit:t,dispatch:e},r){t("SET_LOADING",!0);try{await H.deleteProduct(r),t("REMOVE_PRODUCT",r),e("showNotification",{type:"success",message:"Товар успешно удален"})}catch(o){const t=o instanceof Error?o.message:"Неизвестная ошибка";e("showNotification",{type:"error",message:`Ошибка при удалении товара: ${t}`})}finally{t("SET_LOADING",!1)}},async showNotification({commit:t},{type:e,message:r}){const o=Date.now();t("ADD_NOTIFICATION",{id:o,type:e,message:r}),setTimeout(()=>{t("REMOVE_NOTIFICATION",o)},3e3)},async moveProduct({commit:t,state:e},{id:r,direction:o}){const n=e.products.findIndex(t=>t.id===r);if(-1===n)return;let s;if("up"===o&&n>0)s=n-1;else{if(!("down"===o&&n<e.products.length-1))return;s=n+1}t("MOVE_PRODUCT",{fromIndex:n,toIndex:s})}};var Q={namespaced:!0,state:J,getters:z,mutations:B,actions:K};o.Ay.use(V.Ay);var W=new V.Ay.Store({modules:{products:Q}});o.Ay.config.productionTip=!1,new o.Ay({store:W,render:t=>t(L)}).$mount("#app")}},e={};function r(o){var n=e[o];if(void 0!==n)return n.exports;var s=e[o]={exports:{}};return t[o].call(s.exports,s,s.exports,r),s.exports}r.m=t,function(){var t=[];r.O=function(e,o,n,s){if(!o){var i=1/0;for(l=0;l<t.length;l++){o=t[l][0],n=t[l][1],s=t[l][2];for(var a=!0,c=0;c<o.length;c++)(!1&s||i>=s)&&Object.keys(r.O).every(function(t){return r.O[t](o[c])})?o.splice(c--,1):(a=!1,s<i&&(i=s));if(a){t.splice(l--,1);var u=n();void 0!==u&&(e=u)}}return e}s=s||0;for(var l=t.length;l>0&&t[l-1][2]>s;l--)t[l]=t[l-1];t[l]=[o,n,s]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};r.O.j=function(e){return 0===t[e]};var e=function(e,o){var n,s,i=o[0],a=o[1],c=o[2],u=0;if(i.some(function(e){return 0!==t[e]})){for(n in a)r.o(a,n)&&(r.m[n]=a[n]);if(c)var l=c(r)}for(e&&e(o);u<i.length;u++)s=i[u],r.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return r.O(l)},o=self["webpackChunktest_vue2_project"]=self["webpackChunktest_vue2_project"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=r.O(void 0,[504],function(){return r(4219)});o=r.O(o)})();
//# sourceMappingURL=app.a6212c27.js.map